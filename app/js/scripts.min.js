const todoForm=document.querySelector(".todo"),todoList=document.querySelector(".todo__list"),todoInput=document.querySelector(".todo__field input"),todoMessage=document.querySelector(".todo__message"),todos=JSON.parse(localStorage.getItem("todos"));function addTodo(e){let t=document.createElement("li"),o=todoInput.value;e&&(o=e.text),e&&e.completed&&t.classList.add("_completed"),""==!o.trim()&&(t.innerHTML=o+' <span class="todo__close"></span>',t.classList.add("todo__item"),todoList.append(t),todoInput.value="",removeItem(t)),updateLS(),completedItem(t)}function updateLS(){let e=document.querySelectorAll(".todo__item");const t=[];e.forEach(e=>{t.push({text:e.innerText,completed:e.classList.contains("_completed")})}),localStorage.setItem("todos",JSON.stringify(t))}function completedItem(e){e.addEventListener("click",(function(){this.classList.toggle("_completed"),updateLS(),getProgress()}))}function removeItem(e){e.querySelector(".todo__close").addEventListener("click",(function(e){e.preventDefault(),this.parentNode.remove(),updateLS()}))}function getProgress(){let e=document.querySelectorAll(".todo__item"),t=document.querySelectorAll(".todo__item._completed"),o=document.querySelector(".todo__progress-line"),d=document.querySelector(".todo__progress-value"),s=100*t.length/e.length;0===e.length&&(todoMessage.classList.remove("_hidden"),d.innerHTML="0% / 100%",o.style.width="0%"),e.length&&(o.style.width=s+"%",todoMessage.classList.add("_hidden"),d.innerHTML=+Math.round(s)+"% / 100%"),t.length>0&&100===s&&setTimeout((function(){showModal()}),500)}todos&&todos.forEach(e=>{addTodo(e)}),todoForm.addEventListener("submit",e=>{e.preventDefault(),addTodo(),getProgress()}),getProgress(),todoMessage.addEventListener("click",(function(){todoInput.focus()}));const modalCloseButtons=document.querySelectorAll("[data-modal-close]"),allModals=document.querySelectorAll("[data-modal]");function showModal(){const e=document.querySelector(".modal");e.classList.add("_is-active"),e.querySelector(".modal__content").addEventListener("click",(function(e){e.stopPropagation()}))}modalCloseButtons.forEach((function(e){e.addEventListener("click",(function(){document.querySelector("[data-modal]").classList.remove("_is-active")}))})),allModals.forEach((function(e){e.addEventListener("click",(function(){this.classList.remove("_is-active")}))}));